# ğŸ“ˆ Crypto Signal Aggregator Dashboard

A **Real-time Trading Signal Aggregator** system that automatically captures trading signals from Premium Telegram groups, processes them using **AI (Google Gemini)** to extract key data (Entry, SL, TP), stores them in a database, and displays them in an interactive Web Dashboard.

## ğŸš€ Key Features

### ğŸ¤– Backend (Telegram Bot Listener)
* **Userbot Architecture:** Uses a personal Telegram account to read messages from Private Channels/Groups (Premium).
* **AI Parsing (Gemini 2.0 Flash):** Moves away from rigid Regex. The AI intelligently reads messy signal formats (free text, slang, etc.) and converts them into structured JSON.
* **Smart Filtering:**
    * **Topic Filter:** Processes only specific topics/threads (e.g., "Signal CZ", "Signal Andrew") and ignores general discussion chats.
    * **Keyword Filter:** Ensures messages contain trading keywords before sending them to the AI (saving API quota).
* **Auto-Reconnect:** Runs 24/7 on a VPS with PM2 process management.

### ğŸ’» Frontend (Web Dashboard)
* **Realtime Updates:** The dashboard automatically displays new signal cards without requiring a page refresh (via Supabase Realtime).
* **Profit Calculator:** Instantly calculates estimated Profit/Loss (PnL) and ROE % based on user input for capital & leverage.
* **Multi-Topic Tabs:** Navigation between signal providers (Topics) that can be flexibly configured via Environment Variables.
* **Desktop Notifications:** Browser notifications appear automatically when a new signal arrives.
* **Mobile Responsive:** Optimized layout for both Mobile and Desktop views.
* **Localized Formatting:** Timestamps automatically adjust to the Indonesian local time (WIB) in a readable format.

## ğŸ› ï¸ Tech Stack

**Backend:**
* **Python 3.10+**
* **Telethon** (Telegram Client)
* **Google Generative AI** (Gemini 2.0 Flash)
* **Supabase Python Client** (Database Connection)

**Frontend:**
* **React + Vite** (TypeScript)
* **Bun** (Package Manager & Runtime)
* **Tailwind CSS** (Styling)
* **Lucide React** (Icons)

**Infrastructure:**
* **Database:** Supabase (PostgreSQL)
* **Hosting Frontend:** Netlify
* **Hosting Backend:** VPS (Ubuntu)

---

## âš™ï¸ Prerequisites

Before you begin, ensure you have:
1.  **Supabase Account:** Create a new project and retrieve the URL and Keys.
2.  **Telegram API:** Get your `API_ID` and `API_HASH` from [my.telegram.org](https://my.telegram.org).
3.  **Google AI Studio Key:** Get a free API Key for Gemini from [aistudio.google.com](https://aistudio.google.com/).
4.  **Node.js & Bun:** Installed on your machine.
5.  **Python 3:** Installed on your machine.

---

## ğŸ“¦ Installation & Local Setup

### 1. Database Setup (Supabase)
Go to the SQL Editor in Supabase and run the following command to create the table:

```sql
create table public.signals (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  topic_id bigint,
  coin_symbol text,
  direction text, -- 'LONG' or 'SHORT'
  entry_price numeric,
  sl_price numeric,
  tp_targets numeric[],
  raw_message text
);

-- Enable Realtime
alter publication supabase_realtime add table signals;
````

### 2\. Backend Setup (Bot)

```bash
# Navigate to bot folder
cd bot

# Create virtual environment
python -m venv venv

# Activate venv (Windows)
.\venv\Scripts\Activate
# Activate venv (Mac/Linux)
# source venv/bin/activate

# Install dependencies
pip install -r requirements.txt

# Setup Environment Variables
# Create a .env file and fill it as shown below
```

**File Content: `bot/.env`**

```env
TG_API_ID=123456
TG_API_HASH=abcdef123456...
SUPABASE_URL=[https://xyz.supabase.co](https://xyz.supabase.co)
SUPABASE_SERVICE_KEY=ey... (Use Service Role Key!)
GEMINI_API_KEY=AIza...
TARGET_CHANNELS=-100123456789
ALLOWED_TOPIC_IDS=5314,17658,9912
```

**Run the Bot:**

```bash
python main.py
```

*(On the first run, you will be prompted to login with your Telegram phone number).*

### 3\. Frontend Setup (Dashboard)

```bash
# Navigate to dashboard folder
cd dashboard

# Install dependencies with Bun
bun install

# Setup Environment Variables
# Create a .env.local file
```

**File Content: `dashboard/.env.local`**

```env
VITE_SUPABASE_URL=[https://xyz.supabase.co](https://xyz.supabase.co)
VITE_SUPABASE_ANON_KEY=ey... (Use Anon Key!)
# Format: ID:TabName (Comma separated)
VITE_TOPIC_RX="5314:Xander,17658:Cryptocium,9912:Suli"
```

**Run the Dashboard:**

```bash
bun run dev
```

Open your browser at `http://localhost:5173`.

-----

## ğŸš€ Deployment Guide

### 1\. Backend (VPS)

Use **PM2** to keep the bot running 24/7 in the background.

```bash
# On VPS (Ubuntu)
sudo apt update && sudo apt install python3-venv nodejs npm -y
sudo npm install pm2 -g

# Clone repo & Setup
git clone <repo_url>
cd bot
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# Upload/Create .env & session file manually
nano .env 

# Run with PM2
pm2 start main.py --name "crypto-bot" --interpreter ./venv/bin/python
pm2 save
pm2 startup
```

### 2\. Frontend (Netlify)

1.  Push your code to GitHub.
2.  Import the project in Netlify.
3.  **Build Settings:**
      * **Base directory:** `dashboard`
      * **Build command:** `bun run build`
      * **Publish directory:** `dist`
4.  **Environment Variables:** Add the contents of `.env.local` to Netlify settings.
5.  Deploy\!

-----

## ğŸ“‚ Project Structure

```
â”œâ”€â”€ bot/                        # Python Backend
â”‚   â”œâ”€â”€ main.py                 # Entry point, Telegram listener, filter logic
â”‚   â”œâ”€â”€ parser.py               # AI Logic (Gemini) for text parsing
â”‚   â”œâ”€â”€ scan_history.py         # Utility script to find Topic IDs
â”‚   â”œâ”€â”€ requirements.txt        # Python library list
â”‚   â””â”€â”€ .env                    # Config (Git ignored)
â”‚
â””â”€â”€ dashboard/                  # React Frontend
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ components/         # UI Components (Card, Tabs, Pagination)
    â”‚   â”œâ”€â”€ hooks/              # Custom Hooks (useSignals - Realtime logic)
    â”‚   â”œâ”€â”€ utils/              # Helper functions (Calculator, DateFormat)
    â”‚   â””â”€â”€ types/              # TypeScript Interfaces
    â”œâ”€â”€ public/                 # Static files (_redirects, logo)
    â”œâ”€â”€ vite.config.ts          # Vite Config
    â””â”€â”€ netlify.toml            # Netlify Config
```

## ğŸ›¡ï¸ License

This project was created for educational purposes and personal use.

-----

**Disclaimer:** *Cryptocurrency trading involves high risk. The signals displayed are merely aggregated information from other sources. The developer is not responsible for any financial losses incurred by users.*
